"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[298],{65:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(5166);const i=(0,a.defineComponent)({render:function(){return(0,a.createVNode)("div",{class:"border-b border-gray-lighter last:border-0"},[this.$slots.default&&this.$slots.default()])}})},9298:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var a=r(5166),i=r(65);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,n=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return n=e.done,e},e:function(e){d=!0,l=e},f:function(){try{n||null==r.return||r.return()}finally{if(d)throw l}}}}function n(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const u=(0,a.defineComponent)({props:{"onValue:updated":{type:Function,required:!0},field:{type:Object,required:!0},errors:{type:Array},value:{type:Object}},emits:{"value:updated":function(e,t){return!0}},setup:function(e,t){var r=t.emit,i=(0,a.ref)([]),l=(0,a.ref)([]),o=function(){document.querySelectorAll("input#".concat(e.field.attribute,'[type="file"][data-media-field-reference="').concat(e.field.attribute,'"]')).forEach((function(e){e.value=""}))},d=function(){var t,a,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.value=null!==(t=e.field.value)&&void 0!==t?t:[],l.value=[],r("value:updated","existing-".concat(e.field.attribute),(null!==(a=e.field.value)&&void 0!==a?a:[]).map((function(e){return e.key}))),n||(r("value:updated",e.field.attribute,null),o())};return d(),(0,a.watch)(e,(function(e,t){var r,a;if(e.field.value||t.field.value){var i=null!==(r=e.field.value)&&void 0!==r?r:[],l=null!==(a=t.field.value)&&void 0!==a?a:[];i.reduce((function(e,r){var a;return e&&l.findIndex((function(e){return e.key===r.key}))>=0&&i.length===(null===(a=t.field.value)||void 0===a?void 0:a.length)}),!0)||d(!1)}})),{existingMedias:i,deletedMedias:l,deleteMedia:function(t){var a=i.value.findIndex((function(e){return e.key===t.key}));a<0||(l.value.push(t),i.value=[].concat(n(i.value.slice(0,a)),n(i.value.slice(a+1))),r("value:updated","existing-".concat(e.field.attribute),i.value.map((function(e){return e.key}))))},restoreMedia:function(t){var a=l.value.findIndex((function(e){return e.key===t.key}));a<0||(i.value.push(t),l.value=[].concat(n(l.value.slice(0,a)),n(l.value.slice(a+1))),r("value:updated","existing-".concat(e.field.attribute),i.value.map((function(e){return e.key}))))},clearInput:o}},render:function(){var e,t,r=this,o=[];return this.value&&(o=Array.isArray(this.value)?this.value:[this.value]),(0,a.createVNode)(i.Z,null,{default:function(){return[(0,a.createVNode)("div",{class:"flex flex-wrap p-3 items-center justify-end"},[(0,a.createVNode)("label",{for:r.field.attribute,class:"text-gray-medium-light w-1/4"},[r.field.name,r.field.isRequired&&(0,a.createVNode)("span",{class:"text-sm"},[(0,a.createTextVNode)("*")])]),(0,a.createVNode)("div",{class:"w-3/4 mb-1"},[(0,a.createVNode)("input",(0,a.mergeProps)({name:r.field.attribute,id:r.field.attribute,"data-media-field-reference":r.field.attribute,onChange:function(e){var t=e.target.files;if(r.field.metadata.multiple)r.$emit("value:updated",r.field.attribute,n(t));else{r.$emit("value:updated",r.field.attribute,t[0]);var a,i=l(r.existingMedias);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.deleteMedia(o)}}catch(e){i.e(e)}finally{i.f()}}},type:"file"},r.field.metadata),null),(0,a.createVNode)("label",{class:["cursor-pointer file-label",null!==(e=r.errors)&&void 0!==e&&e.length?"is-invalid":void 0],for:r.field.attribute},[(0,a.createTextVNode)("Choose file(s)...")])]),(null!==(t=r.errors)&&void 0!==t?t:[]).map((function(e){return(0,a.createVNode)("p",{class:"w-3/4 mt-1 italic text-sm text-red"},[e])})),(0,a.createVNode)("div",{class:"w-3/4 ml-1/4 flex"},[o.map((function(e,t){return(0,a.createVNode)("div",{class:["text-center",0===t?"mr-2 my-2 ":"m-2"]},[(0,a.createVNode)("picture",{class:"w-48 h-48 flex items-center justify-center shadow rounded border border-tertiary border-opacity-50 relative bg-gray-100"},[(0,a.createVNode)("img",{class:"max-w-full max-h-full",alt:"Preview image ".concat(e.name),src:URL.createObjectURL(e)},null),(0,a.createVNode)("div",{class:"absolute top-2 right-2 bg-tertiary text-white font-bold rounded p-2 uppercase"},[(0,a.createTextVNode)("NEW")])]),(0,a.createVNode)("div",{class:"text-gray-medium-light w-48 h-6 group relative"},[(0,a.createVNode)("p",{class:"whitespace-nowrap overflow-ellipsis overflow-hidden"},[e.name]),(0,a.createVNode)("p",{class:"z-20 absolute bg-gray-200 px-2 py-1 rounded whitespace-nowrap shadow left-1/2 top-1/2 transform  -translate-x-1/2 -translate-y-1/2 invisible group-hover:visible"},[e.name])])])})),r.existingMedias.map((function(e,t){return(0,a.createVNode)("div",{class:["text-center",0!==t||o.length?"m-2":"mr-2 my-2"]},[(0,a.createVNode)("picture",{class:"w-48 h-48 flex items-center justify-center shadow rounded border border-tertiary border-opacity-50 relative bg-gray-100"},[(0,a.createVNode)("img",{class:"max-w-full max-h-full",alt:"Preview image ".concat(e.name),src:e.fullUrl},null),(0,a.createVNode)("div",{class:"absolute top-0 left-0 w-full h-full bg-gray-medium opacity-0 hover:opacity-100 bg-opacity-25 transition-opacity duration-200"},[(0,a.createVNode)("div",{class:"flex justify-end items-center p-2"},[(0,a.createVNode)("button",{class:"text-tertiary",onClick:function(t){t.preventDefault(),r.deleteMedia(e)}},[(0,a.createVNode)("i",{class:"fas fa-trash"},null)])])])]),(0,a.createVNode)("div",{class:"text-gray-medium-light w-48 h-6 group relative"},[(0,a.createVNode)("p",{class:"whitespace-nowrap overflow-ellipsis overflow-hidden"},[e.name]),(0,a.createVNode)("p",{class:"z-20 absolute bg-gray-200 px-2 py-1 rounded whitespace-nowrap shadow left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 invisible group-hover:visible"},[e.name])])])})),r.deletedMedias.map((function(e,t){return(0,a.createVNode)("div",{class:["text-center filter grayscale",0!==t||o.length||r.existingMedias.length?"m-2":"mr-2 my-2"]},[(0,a.createVNode)("picture",{class:"w-48 h-48 flex items-center justify-center shadow rounded border border-tertiary border-opacity-50 relative bg-gray-100"},[(0,a.createVNode)("img",{class:"max-w-full max-h-full",alt:"Preview image ".concat(e.name),src:e.fullUrl},null),(0,a.createVNode)("div",{class:"absolute top-0 left-0 w-full h-full bg-gray-medium opacity-50 hover:opacity-100 bg-opacity-25 transition-opacity duration-200"},[(0,a.createVNode)("div",{class:"flex justify-end items-center p-2"},[(0,a.createVNode)("button",{class:"text-secondary",onClick:function(t){if(t.preventDefault(),r.field.metadata.multiple)r.restoreMedia(e);else{var a,i=l(r.existingMedias);try{for(i.s();!(a=i.n()).done;){var n=a.value;r.deleteMedia(n)}}catch(e){i.e(e)}finally{i.f()}r.$emit("value:updated",r.field.attribute,null),r.clearInput(),r.restoreMedia(e)}}},[(0,a.createVNode)("i",{class:"fas fa-trash-restore"},null)])])])]),(0,a.createVNode)("div",{class:"text-gray-medium-light w-48 h-6 group relative"},[(0,a.createVNode)("p",{class:"whitespace-nowrap overflow-ellipsis overflow-hidden"},[e.name,(0,a.createTextVNode)(" "),(0,a.createVNode)("i",{class:"text-xs"},[(0,a.createTextVNode)("(deleted)")])]),(0,a.createVNode)("p",{class:"z-20 absolute bg-gray-200 px-2 py-1 rounded whitespace-nowrap shadow left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 invisible group-hover:visible"},[e.name,(0,a.createTextVNode)(" "),(0,a.createVNode)("i",{class:"text-xs"},[(0,a.createTextVNode)("(deleted)")])])])])}))]),!!r.field.helper&&(0,a.createVNode)("p",{class:"w-3/4 mt-1 italic text-sm text-gray-medium-light"},[r.field.helper])])]}})}})}}]);